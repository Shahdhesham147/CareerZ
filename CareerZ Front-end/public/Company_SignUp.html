<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Company Account</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
   <link rel="stylesheet" href="../src/css/all.min.css">
    <link rel="stylesheet" href="../src/css/bootstrap.min.css">
  <link rel="stylesheet" href="../src/css/Company_SignUp.css">
</head>
<body>
  <nav class="navbar back-trans navbar-expand-md fixed-top pb-0" id="navbar">
        <div class="container-fluid mx-5">
          <a class="navbar-brand" href="#">
            <img src="../src/img/New logo 1.png" alt="" class="logo">
          </a>
        
          <button class="navbar-toggler " type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fa-solid fa-bars fa-lg"></i>
          </button>
          
          <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
            <ul class="navbar-nav">
          <li class="nav-item p-3"><a class="nav-link active" href="index.html">Home</a></li>
          <li class="nav-item p-3"><a class="nav-link" href="englishcourses.html">Courses</a></li>
          <li class="nav-item p-3"><a class="nav-link" href="internship.html">Internship</a></li>
          <li class="nav-item p-3"><a class="nav-link" href="#">About Us</a></li>
          <li class="nav-item p-3"><a class="nav-link" href="#">Contact</a></li>
            </ul>
            
            <form class="d-flex">
              <div class="dropdown">
  <i class="fa-solid fa-circle-user Icon m-3 mx-5 dropdown-toggle" 
     id="userMenu" 
     data-bs-toggle="dropdown" 
     aria-expanded="false"
     style="font-size: 30px; cursor: pointer;"></i>

  <ul class="dropdown-menu" aria-labelledby="userMenu">
 <li><a class="dropdown-item" href="profile.html">Profile</a></li>
    <li><a class="dropdown-item" href="All SignUp.html"> sign up</a></li>
    <li><a class="dropdown-item" href="All login.html">login</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="#">log out</a></li>
  </ul>
</div>
          <button class="" id="BTN" type="button">Arabic</button>

            </form>
            
          </div>
        </div>
        
        <script>
          window.addEventListener('scroll' , function(){
            var nav = document.getElementById('navbar')
            if(window.scrollY > 5){
              nav.classList.add('nav-back')
              nav.classList.remove('back-trans')
            }
            else{
              nav.classList.remove('nav-back')
              nav.classList.add('back-trans')
            }
          })
        </script>    
</nav>
<div class="All">
  <form id="signupForm" class="page">

    <div class="form" >
      <h2>Create Company Account</h2>
      <p>Join our platform and connect your team with the right opportunities.</p>

      <input type="text" placeholder="Company Title" id="title">
      <input type="email" placeholder="Email" id="email">
      <input type="password" placeholder="Password" id="password">
      <input type="password" placeholder="Confirm Password" id="confirmPassword">
      <input type="tel" placeholder="Phone Number" id="phoneNumber">
      <textarea rows="4" placeholder="What does your company do?" id="description"></textarea>

      <button type="submit" id="signupBtn">Create Account</button>

      <div class="login-link">
        Already have an account? <a href="#">Login</a>
      </div>
    </div>

    <div class="illustration">
      <img src="../src/img/At the office-amico 1.png" alt="Illustration">

      <div class="upload-box">
        <label for="fileInput">
          <i class="fa-solid fa-cloud-arrow-up"></i>
          Company Logo - Drag & Drop or Click to Upload
        </label>
        <input type="file" id="fileInput">
      </div>
    </div>
    
  </form>
  </div>
  <script>
    const signupForm = document.getElementById("signupForm")

    signupForm.addEventListener("submit", async (e)=>{
      e.preventDefault()

      const title = document.getElementById("title").value.trim();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();
      const confirmPassword = document.getElementById("confirmPassword").value.trim();
      const phoneNumber = document.getElementById("phoneNumber").value.trim();
      const description = document.getElementById("description").value.trim();
      const fileInput = document.getElementById("fileInput");

      if (!title || !email || !password || !confirmPassword || !phoneNumber || !description) {
        alert("Please fill in all required fields");
        return;
      }

      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if(!emailRegex.test(email)){
        alert("Invalid email format");
        return;
      }
      const phoneRegex = /^\d{11,}$/; // 11 رقم على الأقل
      if(!phoneRegex.test(phoneNumber)){
        alert("Phone number must be at least 11 digits");
        return;
      }
      const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}$/;
      if(!passwordRegex.test(password)){
        alert("Password must be at least 6 characters, contain 1 uppercase, 1 lowercase, and 1 number");
        return;
      }

      // التحقق من تطابق الباسورد
      if(password !== confirmPassword){
        alert("Passwords do not match");
        return;
      }

      // Prepare form data (for file upload too)
      const formData = new FormData();
      formData.append("title", title);
      formData.append("email", email);
      formData.append("password", password);
      formData.append("phoneNumber", phoneNumber);
      formData.append("description", description);
      if (fileInput.files[0]) {
        formData.append("logo", fileInput.files[0]); // backend must expect "logo"
      }
      try {
        const res = await fetch("http://localhost:8888/company/signup",{
          method:"POST",
          headers: { "Content-Type": "application/json" },
          body: formData
        })

        const data = await res.json();
        if (res.ok) {
          alert("✅ Signup successful!");
          console.log("Company registered:", data);
          window.location.href = "./index.html";
        } else {
          alert("❌ Error: " + data.error)
        }
      } catch (error) {
        console.error("Request failed:", error);
        alert("❌ " + error.message); 
      }

    })
      const btn = document.getElementById("BTN");

  btn.addEventListener("click", function (e) {
    e.preventDefault();
    if (btn.textContent.trim() === "Arabic") {
      btn.textContent = "EN"; 
      window.location.href = "Company_SignUp_ِArabic.html";
    } else {
      btn.textContent = "Arabic";
      window.location.href = "company.html";
    }
  });
  </script>
     <script src="../src/bootstarp/js/bootstrap.bundle.min.js"></script>

</body>
</html>

